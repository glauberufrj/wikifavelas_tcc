
    <!DOCTYPE html>
    <html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard Interativo da Métrica Composta - Top 20 Verbetes</title>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
                background-color: #0d1117;
                color: #c9d1d9;
                margin: 0;
                padding: 2rem;
            }
            h1 {
                text-align: center;
                color: #f0f6fc;
                padding-bottom: 1rem;
                margin-bottom: 1rem;
            }
            .dashboard-controls {
                text-align: center;
                margin-bottom: 2rem;
                border-bottom: 1px solid #30363d;
                padding-bottom: 2rem;
            }
            #verbete-selector {
                background-color: #161b22;
                color: #c9d1d9;
                border: 1px solid #30363d;
                padding: 0.5rem 1rem;
                border-radius: 6px;
                font-size: 1rem;
                cursor: pointer;
            }
            #chart-container {
                background-color: #161b22;
                border: 1px solid #30363d;
                border-radius: 8px;
                padding: 1rem;
                width: 100%;
                max-width: 900px;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <h1>Análise da Métrica Composta: Top 20 Verbetes</h1>
        
        <div class="dashboard-controls">
            <label for="verbete-selector" style="margin-right: 10px;">Selecione um Verbete:</label>
            <select id="verbete-selector"></select>
        </div>

        <div id="chart-container"></div>

        <script>
            const plotData = [{"titulo": "Lista de Favelas do Município do Rio de Janeiro", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [1.0, 0.7397550279752004, 1.0, 0.44321329639889195, 0.8203705704269061, 4.003338894800999], "text_values": ["#1", "#53", "#1", "#5", "#2", "#1"]}, {"titulo": "Complexo da Maré", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.24103353624797888, 1.0, 0.6517571884984026, 0.05263157894736842, 1.0, 2.94542230369375], "text_values": ["#7", "#1", "#2", "#267", "#1", "#2"]}, {"titulo": "Dicionário de Favelas Marielle Franco", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.2433465640177441, 0.7782373528475979, 0.30670926517571884, 1.0, 0.3849288685187998, 2.7132220505598608], "text_values": ["#6", "#26", "#10", "#1", "#21", "#3"]}, {"titulo": "Lista de Favelas do Rio de Janeiro", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.6214604671138761, 0.8935975888208969, 0.28115015974440893, 0.0, 0.6817124669025132, 2.4779206825816953], "text_values": ["#2", "#5", "#13", "#2745", "#5", "#4"]}, {"titulo": "Marielle Franco", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.3775772938512952, 0.9083650543125058, 0.36421725239616615, 0.16620498614958448, 0.6432503217021076, 2.4596149084116594], "text_values": ["#3", "#4", "#5", "#25", "#6", "#5"]}, {"titulo": "Complexo do Alemão", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.04280476281187363, 0.9379733486722271, 0.3865814696485623, 0.08310249307479224, 0.8028634544434823, 2.2533255286509375], "text_values": ["#73", "#2", "#4", "#96", "#3", "#6"]}, {"titulo": "Rocinha", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.17729534755018747, 0.9119209618790195, 0.3546325878594249, 0.12742382271468145, 0.5560241110989457, 2.1272968311022593], "text_values": ["#10", "#3", "#6", "#43", "#8", "#7"]}, {"titulo": "Cidade de Deus (favela)", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.12401704675406901, 0.8745084018591348, 0.329073482428115, 0.09141274238227147, 0.502554637030512, 1.9215663104541023], "text_values": ["#19", "#6", "#8", "#79", "#11", "#8"]}, {"titulo": "Papo na Laje (programa)", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.11420422228466533, 0.7343691360804624, 0.18849840255591055, 0.06925207756232687, 0.7954834797102669, 1.9018073181936321], "text_values": ["#22", "#60", "#24", "#143", "#4", "#9"]}, {"titulo": "Apoie as favelas na luta contra o Coronavírus", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.13069448457104624, 0.6970646907950984, 0.18210862619808307, 0.6759002770083102, 0.20636857818278162, 1.8921366567553195], "text_values": ["#15", "#128", "#28", "#3", "#54", "#10"]}, {"titulo": "Redes da Maré", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.23865051535340143, 0.8416344086021507, 0.3035143769968051, 0.06371191135734072, 0.39444040838196354, 1.8419516206916615], "text_values": ["#8", "#8", "#11", "#179", "#20", "#11"]}, {"titulo": "Análises e propostas sobre a realidade do coronavírus nas favelas", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.025028814629031608, 0.756163536594791, 0.11182108626198083, 0.7174515235457064, 0.19340807965435097, 1.8038730406858607], "text_values": ["#143", "#43", "#90", "#2", "#62", "#12"]}, {"titulo": "Morro da Providência", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.14571702564606082, 0.8199111707030924, 0.28115015974440893, 0.0664819944598338, 0.4842826110340829, 1.797542961587479], "text_values": ["#12", "#10", "#13", "#155", "#13", "#13"]}, {"titulo": "Memória Viva", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.20798442647970583, 0.6983084719149241, 0.28115015974440893, 0.44598337950138506, 0.1399612249658996, 1.7733876626063236], "text_values": ["#9", "#125", "#13", "#4", "#113", "#14"]}, {"titulo": "Coronavírus nas favelas", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.12642665665505576, 0.8152653945504543, 0.26517571884984026, 0.10249307479224377, 0.461239276411505, 1.770600121259099], "text_values": ["#17", "#11", "#16", "#59", "#14", "#15"]}, {"titulo": "Plano de Enfrentamento da COVID19", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.25970059852309646, 0.6153072133828063, 0.43769968051118213, 0.29085872576177285, 0.1505279223553035, 1.7540941405341615], "text_values": ["#4", "#459", "#3", "#10", "#99", "#16"]}, {"titulo": "Moradia", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.04081645805480752, 0.8507086340318234, 0.33226837060702874, 0.04986149584487535, 0.41529977599940027, 1.6889547345379352], "text_values": ["#77", "#7", "#7", "#298", "#17", "#17"]}, {"titulo": "Chacinas em favelas no Rio de Janeiro", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.14989765008795933, 0.7648530331457162, 0.21725239616613418, 0.31024930747922436, 0.2029423607765977, 1.6451947476556317], "text_values": ["#11", "#34", "#20", "#9", "#55", "#18"]}, {"titulo": "Remoções de favelas no Rio de Janeiro", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.05657907620624367, 0.7792290538388023, 0.15335463258785942, 0.0443213296398892, 0.5173474920143812, 1.5508315842871758], "text_values": ["#48", "#25", "#40", "#381", "#10", "#19"]}, {"titulo": "Violência de Estado operações policiais chacinas e um plano", "x_values": ["Betweenness", "Closeness", "Degree", "Edições", "PageRank", "Métrica Composta"], "y_values": [0.03812762292813979, 0.7359711147886265, 0.16293929712460065, 0.0221606648199446, 0.5517930300821465, 1.510991729743458], "text_values": ["#81", "#58", "#35", "#1059", "#9", "#20"]}];

            const barColors = ['#58a6ff', '#3fb950', '#e3b341', '#f778ba', '#a371f7', '#ff7b72'];

            const layoutTemplate = {
                paper_bgcolor: '#161b22',
                plot_bgcolor: '#161b22',
                font: { color: '#c9d1d9' },
                margin: { l: 50, r: 20, b: 100, t: 80 },
                xaxis: { tickfont: { size: 12 } },
                yaxis: { gridcolor: '#30363d' }
            };

            const selector = document.getElementById('verbete-selector');
            const chartContainer = document.getElementById('chart-container');

            // Popula o menu suspenso
            plotData.forEach((verbete, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${index + 1}. ${verbete.titulo}`;
                selector.appendChild(option);
            });

            // Função para desenhar/atualizar o gráfico
            function displayChart(index) {
                const verbete = plotData[index];
                
                // ATUALIZAÇÃO: Adiciona os textos de ranking ao gráfico
                const data = [{
                    x: verbete.x_values,
                    y: verbete.y_values,
                    text: verbete.text_values, // Array com os rankings
                    textposition: 'inside',
                    textfont: {
                        color: '#161b22', // Cor escura para contrastar com a barra
                        size: 12,
                        family: 'Arial, sans-serif',
                        weight: 'bold'
                    },
                    type: 'bar',
                    marker: { color: barColors }
                }];
                
                let layout = JSON.parse(JSON.stringify(layoutTemplate));
                layout.title = {
                    text: `<b>${verbete.titulo}</b>`,
                    font: { size: 18 }
                };

                Plotly.newPlot(chartContainer, data, layout, {responsive: true});
            }

            // Adiciona o listener para o evento de mudança
            selector.addEventListener('change', (event) => {
                displayChart(event.target.value);
            });

            // Exibe o primeiro gráfico ao carregar a página
            displayChart(0);
        </script>
    </body>
    </html>
    